# === Pheromones ===
pheromones:
  task_intensity_weights:
    pattern_count: 0.6
    dep_count: 0.4
  task_intensity_clamp: [0.1, 1.0]
  decay_type: "exponential"       # "exponential" or "linear"
  decay_rate: 0.05                # rho for exponential decay
  inhibition_decay_rate: 0.08     # k_gamma for inhibition
  inhibition_threshold: 0.1       # gamma max for transformer resume

# === Deep norms thresholds ===
thresholds:
  transformer_intensity_min: 0.2
  validator_confidence_high: 0.8
  validator_confidence_low: 0.5
  max_retry_count: 3
  scope_lock_ttl: 3

# === LLM ===
llm:
  provider: "openrouter"            # "openrouter" or "zai"
  model: "qwen/qwen3-235b-a22b-2507"
  base_url: "https://openrouter.ai/api/v1"
  temperature: 0.2
  max_response_tokens: 0            # deprecated/ignored: client never sends max_tokens
  estimated_completion_tokens: 4096 # budget pre-check estimate when uncapped
  max_tokens_total: 1000000
  max_budget_usd: 0.0               # 0 disables USD budget cap
  pricing_endpoint: "https://openrouter.ai/api/v1/models/user"
  pricing_api_timeout_seconds: 8
  request_timeout_seconds: 300
  pricing_strict: false
  retry_attempts: 3
  retry_backoff: [1, 2, 4]
  min_call_interval_seconds: 0.0     # 0 disables pacing
  min_429_backoff_seconds: 8.0       # floor backoff when provider returns HTTP 429
  retry_jitter_seconds: 0.25         # random jitter added to retry sleeps

# === Loop ===
loop:
  max_ticks: 50
  idle_cycles_to_stop: 2
  sequential_stage_action_cap: 50

# === Transformer ===
transformer:
  syntax_gate:
    enabled: true
    repair_attempts_max: 2
  large_file:
    line_threshold: 250
    max_few_shot_examples: 0
    max_retry_issues: 2

# === Tester ===
tester:
  fallback_quality:
    compile_import_fail: 0.4
    related_regression: 0.6
    pass_or_inconclusive: 0.8
  optional_dependency_hints:
    - "requires that"
    - "pip install"
    - "optional dependency"

# === Capabilities ===
capabilities:
  non_python:
    enabled: true
    include_extensions:
      - ".md"
      - ".txt"
      - ".rst"
      - ".sh"
      - ".json"
      - ".yaml"
      - ".yml"
      - ".toml"
      - ".ini"
      - ".cfg"
    strict_guardrails: true
    max_text_file_bytes: 200000
    pass_confidence: 0.85
    fail_confidence: 0.4
    legacy_tokens:
      - "python2"
      - "xrange"
      - "iteritems"
      - "iterkeys"
      - "itervalues"
      - "raw_input"
      - "has_key"
      - "urllib2"
      - "print >>"

# === Git ===
git:
  shallow_clone: true
  branch_prefix: "stigmergic-migration"
  auto_push: false

# === Prompts ===
prompts:
  stigmergic_preamble: null   # null = built-in default ; "" = disabled

# === Scout ===
scout:
  llm_analysis:
    enabled: true
    severity_weights:
      high: 1.5
      medium: 1.0
      low: 0.5
    intensity_weights:
      weighted_patterns: 0.5
      dependencies: 0.2
      llm_complexity: 0.3

# === Metrics ===
metrics:
  output_dir: "metrics/output"
  export_format: "csv"
  pareto_plot: true
